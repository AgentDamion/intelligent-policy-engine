{"ast":null,"code":"// LiveGovernanceStream.jsx - Real-time governance event feed\nimport React,{useState,useEffect,useRef}from'react';import{Activity,Shield,Users,AlertTriangle,Clock,Filter,Search,FileText,Zap,TrendingUp,ChevronDown,ChevronUp,Download}from'lucide-react';import webSocketService from'../services/websocket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const LiveGovernanceStream=_ref=>{let{isOpen=false,onClose=()=>{},position='right',context=null,currentUser=null}=_ref;const[events,setEvents]=useState([]);const[filteredEvents,setFilteredEvents]=useState([]);const[filters,setFilters]=useState({eventTypes:'all',severity:'all',timeRange:'24h',agency:'all',searchQuery:''});const[isConnected,setIsConnected]=useState(false);const[expandedEvents,setExpandedEvents]=useState(new Set());const[isFilterPanelOpen,setIsFilterPanelOpen]=useState(false);const streamRef=useRef(null);const wsRef=useRef(null);// Event type configurations\nconst eventTypes={policy_decision:{icon:Shield,color:'blue',bgColor:'bg-blue-50',borderColor:'border-blue-200',textColor:'text-blue-800',label:'Policy Decision'},compliance_alert:{icon:AlertTriangle,color:'orange',bgColor:'bg-orange-50',borderColor:'border-orange-200',textColor:'text-orange-800',label:'Compliance Alert'},tool_submission:{icon:FileText,color:'green',bgColor:'bg-green-50',borderColor:'border-green-200',textColor:'text-green-800',label:'Tool Submission'},agent_action:{icon:Zap,color:'purple',bgColor:'bg-purple-50',borderColor:'border-purple-200',textColor:'text-purple-800',label:'AI Agent Action'},risk_assessment:{icon:TrendingUp,color:'red',bgColor:'bg-red-50',borderColor:'border-red-200',textColor:'text-red-800',label:'Risk Assessment'},user_activity:{icon:Users,color:'gray',bgColor:'bg-gray-50',borderColor:'border-gray-200',textColor:'text-gray-800',label:'User Activity'}};// Connect to real-time governance stream\nuseEffect(()=>{if(isOpen){connectToGovernanceStream();loadInitialEvents();}return()=>{if(wsRef.current){wsRef.current.close();}};},[isOpen,context]);// Filter events based on current filters\nuseEffect(()=>{filterEvents();},[events,filters]);const connectToGovernanceStream=()=>{try{console.log('🔌 Connecting to governance stream...');// Connect to WebSocket service\nwebSocketService.connect().then(()=>{console.log('✅ WebSocket connected successfully');setIsConnected(true);// Subscribe to governance events\nwebSocketService.subscribeToGovernance();// Listen for governance events\nwebSocketService.on('governance_event',data=>{console.log('📨 Received governance event:',data);setEvents(prevEvents=>[data,...prevEvents.slice(0,99)]);// Keep last 100 events\n});// Listen for connection status\nwebSocketService.on('connected',isConnected=>{setIsConnected(isConnected);});// Listen for connection status\nwebSocketService.on('connected',isConnected=>{setIsConnected(isConnected);});}).catch(error=>{console.error('❌ Failed to connect to governance stream:',error);setIsConnected(false);});}catch(error){console.error('❌ Failed to connect to governance stream:',error);setIsConnected(false);}};const loadInitialEvents=async()=>{try{// Load recent events from API\nconst mockEvents=generateMockEvents(50);setEvents(mockEvents);}catch(error){console.error('Failed to load initial events:',error);}};const filterEvents=()=>{let filtered=[...events];// Filter by event type\nif(filters.eventTypes!=='all'){filtered=filtered.filter(event=>event.type===filters.eventTypes);}// Filter by severity\nif(filters.severity!=='all'){filtered=filtered.filter(event=>event.severity===filters.severity);}// Filter by time range\nconst now=new Date();const timeRangeMs={'1h':60*60*1000,'24h':24*60*60*1000,'7d':7*24*60*60*1000,'30d':30*24*60*60*1000};if(filters.timeRange!=='all'){const cutoff=new Date(now.getTime()-timeRangeMs[filters.timeRange]);filtered=filtered.filter(event=>new Date(event.timestamp)>cutoff);}// Filter by agency (Enterprise users only)\nif(filters.agency!=='all'&&(currentUser===null||currentUser===void 0?void 0:currentUser.type)==='enterprise'){filtered=filtered.filter(event=>event.agency===filters.agency);}// Filter by search query\nif(filters.searchQuery.trim()){const query=filters.searchQuery.toLowerCase();filtered=filtered.filter(event=>{var _event$agency,_event$user;return event.title.toLowerCase().includes(query)||event.description.toLowerCase().includes(query)||((_event$agency=event.agency)===null||_event$agency===void 0?void 0:_event$agency.toLowerCase().includes(query))||((_event$user=event.user)===null||_event$user===void 0?void 0:_event$user.toLowerCase().includes(query));});}setFilteredEvents(filtered);};const toggleEventExpansion=eventId=>{const newExpanded=new Set(expandedEvents);if(newExpanded.has(eventId)){newExpanded.delete(eventId);}else{newExpanded.add(eventId);}setExpandedEvents(newExpanded);};const exportEvents=()=>{const csvData=filteredEvents.map(event=>({timestamp:event.timestamp,type:event.type,severity:event.severity,title:event.title,description:event.description,agency:event.agency,user:event.user,agent:event.agent}));const csv=[Object.keys(csvData[0]).join(','),...csvData.map(row=>Object.values(row).join(','))].join('\\n');const blob=new Blob([csv],{type:'text/csv'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`governance-events-${new Date().toISOString().split('T')[0]}.csv`;a.click();};if(!isOpen)return null;return/*#__PURE__*/_jsxs(\"div\",{className:`\n      fixed inset-y-0 z-40 flex flex-col bg-white shadow-2xl border-l border-gray-200 transition-all duration-300\n      ${position==='right'?'right-0':'left-0'}\n      ${isOpen?'w-96':'w-0'}\n    `,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-indigo-500 to-purple-600 text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Activity,{size:20}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:\"Live Governance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-indigo-100\",children:isConnected?`${filteredEvents.length} events • Connected`:`${filteredEvents.length} events • Mock Data`})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsFilterPanelOpen(!isFilterPanelOpen),className:\"text-white hover:text-gray-200 p-1 transition-colors\",children:/*#__PURE__*/_jsx(Filter,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:exportEvents,className:\"text-white hover:text-gray-200 p-1 transition-colors\",children:/*#__PURE__*/_jsx(Download,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-white hover:text-gray-200 p-1 transition-colors\",children:\"\\u2715\"})]})]}),isFilterPanelOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 bg-gray-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\",size:16}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search events...\",value:filters.searchQuery,onChange:e=>setFilters({...filters,searchQuery:e.target.value}),className:\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Event Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.eventTypes,onChange:e=>setFilters({...filters,eventTypes:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Types\"}),Object.entries(eventTypes).map(_ref2=>{let[key,type]=_ref2;return/*#__PURE__*/_jsx(\"option\",{value:key,children:type.label},key);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Severity\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.severity,onChange:e=>setFilters({...filters,severity:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"critical\",children:\"Critical\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Time Range\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.timeRange,onChange:e=>setFilters({...filters,timeRange:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1h\",children:\"Last Hour\"}),/*#__PURE__*/_jsx(\"option\",{value:\"24h\",children:\"Last 24 Hours\"}),/*#__PURE__*/_jsx(\"option\",{value:\"7d\",children:\"Last 7 Days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"30d\",children:\"Last 30 Days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Time\"})]})]})]}),(currentUser===null||currentUser===void 0?void 0:currentUser.type)==='enterprise'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Agency\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.agency,onChange:e=>setFilters({...filters,agency:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Agencies\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ogilvy-health\",children:\"Ogilvy Health\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mccann-health\",children:\"McCann Health\"}),/*#__PURE__*/_jsx(\"option\",{value:\"havas-health\",children:\"Havas Health\"}),/*#__PURE__*/_jsx(\"option\",{value:\"razorfish-health\",children:\"Razorfish Health\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{ref:streamRef,className:\"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50\",children:filteredEvents.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Activity,{className:\"mx-auto text-gray-400 mb-4\",size:48}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No Events Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:filters.searchQuery||filters.eventTypes!=='all'||filters.timeRange!=='24h'?'Try adjusting your filters to see more events.':'Events will appear here as they occur.'})]}):filteredEvents.map(event=>/*#__PURE__*/_jsx(EventCard,{event:event,eventType:eventTypes[event.type],isExpanded:expandedEvents.has(event.id),onToggleExpansion:()=>toggleEventExpansion(event.id),currentUser:currentUser},event.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 px-4 py-2 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-2 h-2 rounded-full ${isConnected?'bg-green-500':'bg-gray-500'}`}),/*#__PURE__*/_jsx(\"span\",{children:isConnected?'Live Stream Active':'Mock Data Mode'})]}),/*#__PURE__*/_jsxs(\"span\",{children:[filteredEvents.length,\" events shown\"]})]})})]});};// Individual Event Card Component - FIXED VERSION\nconst EventCard=_ref3=>{let{event,eventType,isExpanded,onToggleExpansion,currentUser}=_ref3;const Icon=eventType.icon;const timeAgo=getTimeAgo(event.timestamp);const getSeverityColor=severity=>{switch(severity){case'critical':return'text-red-600 bg-red-100';case'high':return'text-orange-600 bg-orange-100';case'medium':return'text-yellow-600 bg-yellow-100';case'low':return'text-green-600 bg-green-100';default:return'text-gray-600 bg-gray-100';}};// Fixed: Use static classes instead of dynamic\nconst getIconColorClass=color=>{switch(color){case'blue':return'text-blue-600';case'orange':return'text-orange-600';case'green':return'text-green-600';case'purple':return'text-purple-600';case'red':return'text-red-600';case'gray':return'text-gray-600';default:return'text-gray-600';}};return/*#__PURE__*/_jsxs(\"div\",{className:`\n      border rounded-lg bg-white shadow-sm transition-all duration-200 hover:shadow-md\n      ${eventType.borderColor}\n    `,children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:`\n              w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0\n              ${eventType.bgColor}\n            `,children:/*#__PURE__*/_jsx(Icon,{size:16,className:getIconColorClass(eventType.color)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 text-sm truncate\",children:event.title}),/*#__PURE__*/_jsx(\"span\",{className:`\n                  px-2 py-1 rounded text-xs font-medium\n                  ${getSeverityColor(event.severity)}\n                `,children:event.severity})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-2\",style:{overflow:'hidden',display:'-webkit-box',WebkitLineClamp:2,WebkitBoxOrient:'vertical'},children:event.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-xs text-gray-500\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Clock,{size:12}),timeAgo]}),event.agency&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Users,{size:12}),event.agency]}),event.user&&/*#__PURE__*/_jsx(\"span\",{children:event.user}),event.agent&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Zap,{size:12}),event.agent]})]})]})]}),event.details&&/*#__PURE__*/_jsx(\"button\",{onClick:onToggleExpansion,className:\"text-gray-400 hover:text-gray-600 p-1 transition-colors\",children:isExpanded?/*#__PURE__*/_jsx(ChevronUp,{size:16}):/*#__PURE__*/_jsx(ChevronDown,{size:16})})]})}),isExpanded&&event.details&&/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 p-4 bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[event.details.map((detail,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 mb-1\",children:detail.label}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:detail.value})]},index)),event.actions&&event.actions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"pt-3 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 mb-2 text-sm\",children:\"Quick Actions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:event.actions.map((action,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>executeEventAction(action),className:\"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium hover:bg-blue-200 transition-colors\",children:action.label},index))})]})]})})]});};// Utility functions\nconst getTimeAgo=timestamp=>{const now=new Date();const eventTime=new Date(timestamp);const diffMs=now-eventTime;const diffMins=Math.floor(diffMs/60000);const diffHours=Math.floor(diffMins/60);const diffDays=Math.floor(diffHours/24);if(diffMins<1)return'Just now';if(diffMins<60)return`${diffMins}m ago`;if(diffHours<24)return`${diffHours}h ago`;return`${diffDays}d ago`;};const executeEventAction=action=>{// Execute action and update UI\nwindow.dispatchEvent(new CustomEvent(action.event,{detail:action.data}));};// Mock event generator for development\nconst generateMockEvents=count=>{const mockEvents=[];const eventTemplates=[{type:'policy_decision',severity:'medium',title:'AI Policy Updated',description:'Social media content policy updated with new FDA guidelines',agency:'Ogilvy Health',user:'Sarah Johnson',agent:'Policy Assistant'},{type:'tool_submission',severity:'low',title:'New Tool Submitted',description:'Midjourney v6 submitted for approval by creative team',agency:'McCann Health',user:'Mike Chen',agent:null},{type:'compliance_alert',severity:'high',title:'Compliance Violation Detected',description:'Medical claim detected in AI-generated social media post',agency:'Havas Health',user:'Emma Wilson',agent:'Compliance Monitor'},{type:'risk_assessment',severity:'medium',title:'Risk Assessment Complete',description:'Quarterly AI tool risk assessment completed for all approved tools',agency:'Razorfish Health',user:'David Lee',agent:'Risk Analyzer'},{type:'agent_action',severity:'low',title:'Auto-Approval Processed',description:'Low-risk content variation automatically approved by AI agent',agency:'McCann Health',user:null,agent:'Approval Assistant'}];for(let i=0;i<count;i++){const template=eventTemplates[Math.floor(Math.random()*eventTemplates.length)];const event={id:Date.now()+i,...template,timestamp:new Date(Date.now()-Math.random()*86400000*7).toISOString(),// Random time in last week\ndetails:[{label:'Event ID',value:`EVT-${String(Date.now()+i).slice(-8)}`},{label:'Source',value:'AI Governance System'},{label:'Impact',value:template.severity==='high'?'High - Immediate attention required':'Low - Routine monitoring'}],actions:template.type==='compliance_alert'?[{label:'Review Details',event:'openComplianceReview',data:{eventId:Date.now()+i}},{label:'Contact Agency',event:'openAgencyContact',data:{agency:template.agency}}]:[]};mockEvents.push(event);}return mockEvents.sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp));};// Integration hook for opening LiveGovernanceStream\nexport const useLiveGovernanceStream=()=>{const[isStreamOpen,setIsStreamOpen]=useState(false);const[streamContext,setStreamContext]=useState(null);useEffect(()=>{const handleOpenStream=event=>{setStreamContext(event.detail||null);setIsStreamOpen(true);};window.addEventListener('openGovernanceStream',handleOpenStream);return()=>window.removeEventListener('openGovernanceStream',handleOpenStream);},[]);const openStream=function(){let context=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setStreamContext(context);setIsStreamOpen(true);};return{isStreamOpen,setIsStreamOpen,streamContext,openStream};};export default LiveGovernanceStream;","map":{"version":3,"names":["React","useState","useEffect","useRef","Activity","Shield","Users","AlertTriangle","Clock","Filter","Search","FileText","Zap","TrendingUp","ChevronDown","ChevronUp","Download","webSocketService","jsx","_jsx","jsxs","_jsxs","LiveGovernanceStream","_ref","isOpen","onClose","position","context","currentUser","events","setEvents","filteredEvents","setFilteredEvents","filters","setFilters","eventTypes","severity","timeRange","agency","searchQuery","isConnected","setIsConnected","expandedEvents","setExpandedEvents","Set","isFilterPanelOpen","setIsFilterPanelOpen","streamRef","wsRef","policy_decision","icon","color","bgColor","borderColor","textColor","label","compliance_alert","tool_submission","agent_action","risk_assessment","user_activity","connectToGovernanceStream","loadInitialEvents","current","close","filterEvents","console","log","connect","then","subscribeToGovernance","on","data","prevEvents","slice","catch","error","mockEvents","generateMockEvents","filtered","filter","event","type","now","Date","timeRangeMs","cutoff","getTime","timestamp","trim","query","toLowerCase","_event$agency","_event$user","title","includes","description","user","toggleEventExpansion","eventId","newExpanded","has","delete","add","exportEvents","csvData","map","agent","csv","Object","keys","join","row","values","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","toISOString","split","click","className","children","size","length","onClick","placeholder","value","onChange","e","target","entries","_ref2","key","ref","EventCard","eventType","isExpanded","id","onToggleExpansion","_ref3","Icon","timeAgo","getTimeAgo","getSeverityColor","getIconColorClass","style","overflow","display","WebkitLineClamp","WebkitBoxOrient","details","detail","index","actions","action","executeEventAction","eventTime","diffMs","diffMins","Math","floor","diffHours","diffDays","window","dispatchEvent","CustomEvent","count","eventTemplates","i","template","random","String","push","sort","b","useLiveGovernanceStream","isStreamOpen","setIsStreamOpen","streamContext","setStreamContext","handleOpenStream","addEventListener","removeEventListener","openStream","arguments","undefined"],"sources":["C:/Users/dgtow/intelligent-policy-engine/aicomplyr-intelligence/ui/src/components/LiveGovernanceStream.jsx"],"sourcesContent":["// LiveGovernanceStream.jsx - Real-time governance event feed\nimport React, { useState, useEffect, useRef } from 'react'\nimport { \n  Activity, Shield, Users, AlertTriangle, Clock, \n  Filter, Search, FileText, Zap, TrendingUp,\n  ChevronDown, ChevronUp, Download\n} from 'lucide-react'\nimport webSocketService from '../services/websocket'\n\nexport const LiveGovernanceStream = ({ \n  isOpen = false,\n  onClose = () => {},\n  position = 'right',\n  context = null,\n  currentUser = null\n}) => {\n  const [events, setEvents] = useState([])\n  const [filteredEvents, setFilteredEvents] = useState([])\n  const [filters, setFilters] = useState({\n    eventTypes: 'all',\n    severity: 'all',\n    timeRange: '24h',\n    agency: 'all',\n    searchQuery: ''\n  })\n  const [isConnected, setIsConnected] = useState(false)\n  const [expandedEvents, setExpandedEvents] = useState(new Set())\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState(false)\n  const streamRef = useRef(null)\n  const wsRef = useRef(null)\n\n  // Event type configurations\n  const eventTypes = {\n    policy_decision: {\n      icon: Shield,\n      color: 'blue',\n      bgColor: 'bg-blue-50',\n      borderColor: 'border-blue-200',\n      textColor: 'text-blue-800',\n      label: 'Policy Decision'\n    },\n    compliance_alert: {\n      icon: AlertTriangle,\n      color: 'orange',\n      bgColor: 'bg-orange-50',\n      borderColor: 'border-orange-200',\n      textColor: 'text-orange-800',\n      label: 'Compliance Alert'\n    },\n    tool_submission: {\n      icon: FileText,\n      color: 'green',\n      bgColor: 'bg-green-50',\n      borderColor: 'border-green-200',\n      textColor: 'text-green-800',\n      label: 'Tool Submission'\n    },\n    agent_action: {\n      icon: Zap,\n      color: 'purple',\n      bgColor: 'bg-purple-50',\n      borderColor: 'border-purple-200',\n      textColor: 'text-purple-800',\n      label: 'AI Agent Action'\n    },\n    risk_assessment: {\n      icon: TrendingUp,\n      color: 'red',\n      bgColor: 'bg-red-50',\n      borderColor: 'border-red-200',\n      textColor: 'text-red-800',\n      label: 'Risk Assessment'\n    },\n    user_activity: {\n      icon: Users,\n      color: 'gray',\n      bgColor: 'bg-gray-50',\n      borderColor: 'border-gray-200',\n      textColor: 'text-gray-800',\n      label: 'User Activity'\n    }\n  }\n\n  // Connect to real-time governance stream\n  useEffect(() => {\n    if (isOpen) {\n      connectToGovernanceStream()\n      loadInitialEvents()\n    }\n\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close()\n      }\n    }\n  }, [isOpen, context])\n\n  // Filter events based on current filters\n  useEffect(() => {\n    filterEvents()\n  }, [events, filters])\n\n  const connectToGovernanceStream = () => {\n    try {\n      console.log('🔌 Connecting to governance stream...')\n      \n      // Connect to WebSocket service\n      webSocketService.connect().then(() => {\n        console.log('✅ WebSocket connected successfully')\n        setIsConnected(true)\n        \n        // Subscribe to governance events\n        webSocketService.subscribeToGovernance()\n        \n        // Listen for governance events\n        webSocketService.on('governance_event', (data) => {\n          console.log('📨 Received governance event:', data)\n          setEvents(prevEvents => [data, ...prevEvents.slice(0, 99)]) // Keep last 100 events\n        })\n        \n        // Listen for connection status\n        webSocketService.on('connected', (isConnected) => {\n          setIsConnected(isConnected)\n        })\n        \n        // Listen for connection status\n        webSocketService.on('connected', (isConnected) => {\n          setIsConnected(isConnected)\n        })\n        \n      }).catch(error => {\n        console.error('❌ Failed to connect to governance stream:', error)\n        setIsConnected(false)\n      })\n    } catch (error) {\n      console.error('❌ Failed to connect to governance stream:', error)\n      setIsConnected(false)\n    }\n  }\n\n  const loadInitialEvents = async () => {\n    try {\n      // Load recent events from API\n      const mockEvents = generateMockEvents(50)\n      setEvents(mockEvents)\n    } catch (error) {\n      console.error('Failed to load initial events:', error)\n    }\n  }\n\n  const filterEvents = () => {\n    let filtered = [...events]\n\n    // Filter by event type\n    if (filters.eventTypes !== 'all') {\n      filtered = filtered.filter(event => event.type === filters.eventTypes)\n    }\n\n    // Filter by severity\n    if (filters.severity !== 'all') {\n      filtered = filtered.filter(event => event.severity === filters.severity)\n    }\n\n    // Filter by time range\n    const now = new Date()\n    const timeRangeMs = {\n      '1h': 60 * 60 * 1000,\n      '24h': 24 * 60 * 60 * 1000,\n      '7d': 7 * 24 * 60 * 60 * 1000,\n      '30d': 30 * 24 * 60 * 60 * 1000\n    }\n    \n    if (filters.timeRange !== 'all') {\n      const cutoff = new Date(now.getTime() - timeRangeMs[filters.timeRange])\n      filtered = filtered.filter(event => new Date(event.timestamp) > cutoff)\n    }\n\n    // Filter by agency (Enterprise users only)\n    if (filters.agency !== 'all' && currentUser?.type === 'enterprise') {\n      filtered = filtered.filter(event => event.agency === filters.agency)\n    }\n\n    // Filter by search query\n    if (filters.searchQuery.trim()) {\n      const query = filters.searchQuery.toLowerCase()\n      filtered = filtered.filter(event => \n        event.title.toLowerCase().includes(query) ||\n        event.description.toLowerCase().includes(query) ||\n        event.agency?.toLowerCase().includes(query) ||\n        event.user?.toLowerCase().includes(query)\n      )\n    }\n\n    setFilteredEvents(filtered)\n  }\n\n  const toggleEventExpansion = (eventId) => {\n    const newExpanded = new Set(expandedEvents)\n    if (newExpanded.has(eventId)) {\n      newExpanded.delete(eventId)\n    } else {\n      newExpanded.add(eventId)\n    }\n    setExpandedEvents(newExpanded)\n  }\n\n  const exportEvents = () => {\n    const csvData = filteredEvents.map(event => ({\n      timestamp: event.timestamp,\n      type: event.type,\n      severity: event.severity,\n      title: event.title,\n      description: event.description,\n      agency: event.agency,\n      user: event.user,\n      agent: event.agent\n    }))\n\n    const csv = [\n      Object.keys(csvData[0]).join(','),\n      ...csvData.map(row => Object.values(row).join(','))\n    ].join('\\n')\n\n    const blob = new Blob([csv], { type: 'text/csv' })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = `governance-events-${new Date().toISOString().split('T')[0]}.csv`\n    a.click()\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className={`\n      fixed inset-y-0 z-40 flex flex-col bg-white shadow-2xl border-l border-gray-200 transition-all duration-300\n      ${position === 'right' ? 'right-0' : 'left-0'}\n      ${isOpen ? 'w-96' : 'w-0'}\n    `}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-indigo-500 to-purple-600 text-white\">\n        <div className=\"flex items-center gap-3\">\n          <Activity size={20} />\n          <div>\n            <h3 className=\"font-semibold\">Live Governance</h3>\n            <p className=\"text-xs text-indigo-100\">\n              {isConnected ? \n                `${filteredEvents.length} events • Connected` : \n                `${filteredEvents.length} events • Mock Data`\n              }\n            </p>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\n            className=\"text-white hover:text-gray-200 p-1 transition-colors\"\n          >\n            <Filter size={16} />\n          </button>\n          <button\n            onClick={exportEvents}\n            className=\"text-white hover:text-gray-200 p-1 transition-colors\"\n          >\n            <Download size={16} />\n          </button>\n          <button\n            onClick={onClose}\n            className=\"text-white hover:text-gray-200 p-1 transition-colors\"\n          >\n            ✕\n          </button>\n        </div>\n      </div>\n\n      {/* Filter Panel */}\n      {isFilterPanelOpen && (\n        <div className=\"border-b border-gray-200 bg-gray-50 p-4\">\n          <div className=\"space-y-3\">\n            {/* Search */}\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n              <input\n                type=\"text\"\n                placeholder=\"Search events...\"\n                value={filters.searchQuery}\n                onChange={(e) => setFilters({...filters, searchQuery: e.target.value})}\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm\"\n              />\n            </div>\n\n            {/* Event Type Filter */}\n            <div>\n              <label className=\"block text-xs font-medium text-gray-700 mb-1\">Event Type</label>\n              <select\n                value={filters.eventTypes}\n                onChange={(e) => setFilters({...filters, eventTypes: e.target.value})}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\n              >\n                <option value=\"all\">All Types</option>\n                {Object.entries(eventTypes).map(([key, type]) => (\n                  <option key={key} value={key}>{type.label}</option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              {/* Severity Filter */}\n              <div>\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">Severity</label>\n                <select\n                  value={filters.severity}\n                  onChange={(e) => setFilters({...filters, severity: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\n                >\n                  <option value=\"all\">All</option>\n                  <option value=\"low\">Low</option>\n                  <option value=\"medium\">Medium</option>\n                  <option value=\"high\">High</option>\n                  <option value=\"critical\">Critical</option>\n                </select>\n              </div>\n\n              {/* Time Range Filter */}\n              <div>\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">Time Range</label>\n                <select\n                  value={filters.timeRange}\n                  onChange={(e) => setFilters({...filters, timeRange: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\n                >\n                  <option value=\"1h\">Last Hour</option>\n                  <option value=\"24h\">Last 24 Hours</option>\n                  <option value=\"7d\">Last 7 Days</option>\n                  <option value=\"30d\">Last 30 Days</option>\n                  <option value=\"all\">All Time</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Agency Filter (Enterprise only) */}\n            {currentUser?.type === 'enterprise' && (\n              <div>\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">Agency</label>\n                <select\n                  value={filters.agency}\n                  onChange={(e) => setFilters({...filters, agency: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\n                >\n                  <option value=\"all\">All Agencies</option>\n                  <option value=\"ogilvy-health\">Ogilvy Health</option>\n                  <option value=\"mccann-health\">McCann Health</option>\n                  <option value=\"havas-health\">Havas Health</option>\n                  <option value=\"razorfish-health\">Razorfish Health</option>\n                </select>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Events Stream */}\n      <div \n        ref={streamRef}\n        className=\"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50\"\n      >\n        {filteredEvents.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <Activity className=\"mx-auto text-gray-400 mb-4\" size={48} />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Events Found</h3>\n            <p className=\"text-gray-500 text-sm\">\n              {filters.searchQuery || filters.eventTypes !== 'all' || filters.timeRange !== '24h'\n                ? 'Try adjusting your filters to see more events.'\n                : 'Events will appear here as they occur.'\n              }\n            </p>\n          </div>\n        ) : (\n          filteredEvents.map(event => (\n            <EventCard\n              key={event.id}\n              event={event}\n              eventType={eventTypes[event.type]}\n              isExpanded={expandedEvents.has(event.id)}\n              onToggleExpansion={() => toggleEventExpansion(event.id)}\n              currentUser={currentUser}\n            />\n          ))\n        )}\n      </div>\n\n      {/* Status Footer */}\n      <div className=\"border-t border-gray-200 px-4 py-2 bg-white\">\n        <div className=\"flex items-center justify-between text-xs text-gray-500\">\n          <div className=\"flex items-center gap-2\">\n            <div className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-500' : 'bg-gray-500'}`} />\n            <span>{isConnected ? 'Live Stream Active' : 'Mock Data Mode'}</span>\n          </div>\n          <span>{filteredEvents.length} events shown</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// Individual Event Card Component - FIXED VERSION\nconst EventCard = ({ event, eventType, isExpanded, onToggleExpansion, currentUser }) => {\n  const Icon = eventType.icon\n  const timeAgo = getTimeAgo(event.timestamp)\n  \n  const getSeverityColor = (severity) => {\n    switch (severity) {\n      case 'critical': return 'text-red-600 bg-red-100'\n      case 'high': return 'text-orange-600 bg-orange-100'\n      case 'medium': return 'text-yellow-600 bg-yellow-100'\n      case 'low': return 'text-green-600 bg-green-100'\n      default: return 'text-gray-600 bg-gray-100'\n    }\n  }\n\n  // Fixed: Use static classes instead of dynamic\n  const getIconColorClass = (color) => {\n    switch (color) {\n      case 'blue': return 'text-blue-600'\n      case 'orange': return 'text-orange-600'\n      case 'green': return 'text-green-600'\n      case 'purple': return 'text-purple-600'\n      case 'red': return 'text-red-600'\n      case 'gray': return 'text-gray-600'\n      default: return 'text-gray-600'\n    }\n  }\n\n  return (\n    <div className={`\n      border rounded-lg bg-white shadow-sm transition-all duration-200 hover:shadow-md\n      ${eventType.borderColor}\n    `}>\n      {/* Event Header */}\n      <div className=\"p-4\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-start gap-3 flex-1\">\n            <div className={`\n              w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0\n              ${eventType.bgColor}\n            `}>\n              <Icon size={16} className={getIconColorClass(eventType.color)} />\n            </div>\n            \n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center gap-2 mb-1\">\n                <h4 className=\"font-medium text-gray-900 text-sm truncate\">\n                  {event.title}\n                </h4>\n                <span className={`\n                  px-2 py-1 rounded text-xs font-medium\n                  ${getSeverityColor(event.severity)}\n                `}>\n                  {event.severity}\n                </span>\n              </div>\n              \n              <p className=\"text-gray-600 text-sm mb-2\" style={{ \n                overflow: 'hidden',\n                display: '-webkit-box',\n                WebkitLineClamp: 2,\n                WebkitBoxOrient: 'vertical'\n              }}>\n                {event.description}\n              </p>\n              \n              <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                <span className=\"flex items-center gap-1\">\n                  <Clock size={12} />\n                  {timeAgo}\n                </span>\n                {event.agency && (\n                  <span className=\"flex items-center gap-1\">\n                    <Users size={12} />\n                    {event.agency}\n                  </span>\n                )}\n                {event.user && (\n                  <span>{event.user}</span>\n                )}\n                {event.agent && (\n                  <span className=\"flex items-center gap-1\">\n                    <Zap size={12} />\n                    {event.agent}\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {event.details && (\n            <button\n              onClick={onToggleExpansion}\n              className=\"text-gray-400 hover:text-gray-600 p-1 transition-colors\"\n            >\n              {isExpanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Expanded Details */}\n      {isExpanded && event.details && (\n        <div className=\"border-t border-gray-200 p-4 bg-gray-50\">\n          <div className=\"space-y-3\">\n            {event.details.map((detail, index) => (\n              <div key={index} className=\"text-sm\">\n                <div className=\"font-medium text-gray-900 mb-1\">{detail.label}</div>\n                <div className=\"text-gray-600\">{detail.value}</div>\n              </div>\n            ))}\n            \n            {event.actions && event.actions.length > 0 && (\n              <div className=\"pt-3 border-t border-gray-200\">\n                <div className=\"font-medium text-gray-900 mb-2 text-sm\">Quick Actions</div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {event.actions.map((action, index) => (\n                    <button\n                      key={index}\n                      onClick={() => executeEventAction(action)}\n                      className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium hover:bg-blue-200 transition-colors\"\n                    >\n                      {action.label}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\n// Utility functions\nconst getTimeAgo = (timestamp) => {\n  const now = new Date()\n  const eventTime = new Date(timestamp)\n  const diffMs = now - eventTime\n  const diffMins = Math.floor(diffMs / 60000)\n  const diffHours = Math.floor(diffMins / 60)\n  const diffDays = Math.floor(diffHours / 24)\n\n  if (diffMins < 1) return 'Just now'\n  if (diffMins < 60) return `${diffMins}m ago`\n  if (diffHours < 24) return `${diffHours}h ago`\n  return `${diffDays}d ago`\n}\n\nconst executeEventAction = (action) => {\n  // Execute action and update UI\n  window.dispatchEvent(new CustomEvent(action.event, { detail: action.data }))\n}\n\n// Mock event generator for development\nconst generateMockEvents = (count) => {\n  const mockEvents = []\n  const eventTemplates = [\n    {\n      type: 'policy_decision',\n      severity: 'medium',\n      title: 'AI Policy Updated',\n      description: 'Social media content policy updated with new FDA guidelines',\n      agency: 'Ogilvy Health',\n      user: 'Sarah Johnson',\n      agent: 'Policy Assistant'\n    },\n    {\n      type: 'tool_submission',\n      severity: 'low',\n      title: 'New Tool Submitted',\n      description: 'Midjourney v6 submitted for approval by creative team',\n      agency: 'McCann Health',\n      user: 'Mike Chen',\n      agent: null\n    },\n    {\n      type: 'compliance_alert',\n      severity: 'high',\n      title: 'Compliance Violation Detected',\n      description: 'Medical claim detected in AI-generated social media post',\n      agency: 'Havas Health',\n      user: 'Emma Wilson',\n      agent: 'Compliance Monitor'\n    },\n    {\n      type: 'risk_assessment',\n      severity: 'medium',\n      title: 'Risk Assessment Complete',\n      description: 'Quarterly AI tool risk assessment completed for all approved tools',\n      agency: 'Razorfish Health',\n      user: 'David Lee',\n      agent: 'Risk Analyzer'\n    },\n    {\n      type: 'agent_action',\n      severity: 'low',\n      title: 'Auto-Approval Processed',\n      description: 'Low-risk content variation automatically approved by AI agent',\n      agency: 'McCann Health',\n      user: null,\n      agent: 'Approval Assistant'\n    }\n  ]\n\n  for (let i = 0; i < count; i++) {\n    const template = eventTemplates[Math.floor(Math.random() * eventTemplates.length)]\n    const event = {\n      id: Date.now() + i,\n      ...template,\n      timestamp: new Date(Date.now() - Math.random() * 86400000 * 7).toISOString(), // Random time in last week\n      details: [\n        { label: 'Event ID', value: `EVT-${String(Date.now() + i).slice(-8)}` },\n        { label: 'Source', value: 'AI Governance System' },\n        { label: 'Impact', value: template.severity === 'high' ? 'High - Immediate attention required' : 'Low - Routine monitoring' }\n      ],\n      actions: template.type === 'compliance_alert' ? [\n        { label: 'Review Details', event: 'openComplianceReview', data: { eventId: Date.now() + i } },\n        { label: 'Contact Agency', event: 'openAgencyContact', data: { agency: template.agency } }\n      ] : []\n    }\n    mockEvents.push(event)\n  }\n\n  return mockEvents.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))\n}\n\n// Integration hook for opening LiveGovernanceStream\nexport const useLiveGovernanceStream = () => {\n  const [isStreamOpen, setIsStreamOpen] = useState(false)\n  const [streamContext, setStreamContext] = useState(null)\n\n  useEffect(() => {\n    const handleOpenStream = (event) => {\n      setStreamContext(event.detail || null)\n      setIsStreamOpen(true)\n    }\n\n    window.addEventListener('openGovernanceStream', handleOpenStream)\n    return () => window.removeEventListener('openGovernanceStream', handleOpenStream)\n  }, [])\n\n  const openStream = (context = null) => {\n    setStreamContext(context)\n    setIsStreamOpen(true)\n  }\n\n  return {\n    isStreamOpen,\n    setIsStreamOpen,\n    streamContext,\n    openStream\n  }\n}\n\nexport default LiveGovernanceStream"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OACEC,QAAQ,CAAEC,MAAM,CAAEC,KAAK,CAAEC,aAAa,CAAEC,KAAK,CAC7CC,MAAM,CAAEC,MAAM,CAAEC,QAAQ,CAAEC,GAAG,CAAEC,UAAU,CACzCC,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAC3B,cAAc,CACrB,MAAO,CAAAC,gBAAgB,KAAM,uBAAuB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,MAAO,MAAM,CAAAC,oBAAoB,CAAGC,IAAA,EAM9B,IAN+B,CACnCC,MAAM,CAAG,KAAK,CACdC,OAAO,CAAGA,CAAA,GAAM,CAAC,CAAC,CAClBC,QAAQ,CAAG,OAAO,CAClBC,OAAO,CAAG,IAAI,CACdC,WAAW,CAAG,IAChB,CAAC,CAAAL,IAAA,CACC,KAAM,CAACM,MAAM,CAAEC,SAAS,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAAC8B,cAAc,CAAEC,iBAAiB,CAAC,CAAG/B,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACgC,OAAO,CAAEC,UAAU,CAAC,CAAGjC,QAAQ,CAAC,CACrCkC,UAAU,CAAE,KAAK,CACjBC,QAAQ,CAAE,KAAK,CACfC,SAAS,CAAE,KAAK,CAChBC,MAAM,CAAE,KAAK,CACbC,WAAW,CAAE,EACf,CAAC,CAAC,CACF,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGxC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACyC,cAAc,CAAEC,iBAAiB,CAAC,CAAG1C,QAAQ,CAAC,GAAI,CAAA2C,GAAG,CAAC,CAAC,CAAC,CAC/D,KAAM,CAACC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG7C,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAAA8C,SAAS,CAAG5C,MAAM,CAAC,IAAI,CAAC,CAC9B,KAAM,CAAA6C,KAAK,CAAG7C,MAAM,CAAC,IAAI,CAAC,CAE1B;AACA,KAAM,CAAAgC,UAAU,CAAG,CACjBc,eAAe,CAAE,CACfC,IAAI,CAAE7C,MAAM,CACZ8C,KAAK,CAAE,MAAM,CACbC,OAAO,CAAE,YAAY,CACrBC,WAAW,CAAE,iBAAiB,CAC9BC,SAAS,CAAE,eAAe,CAC1BC,KAAK,CAAE,iBACT,CAAC,CACDC,gBAAgB,CAAE,CAChBN,IAAI,CAAE3C,aAAa,CACnB4C,KAAK,CAAE,QAAQ,CACfC,OAAO,CAAE,cAAc,CACvBC,WAAW,CAAE,mBAAmB,CAChCC,SAAS,CAAE,iBAAiB,CAC5BC,KAAK,CAAE,kBACT,CAAC,CACDE,eAAe,CAAE,CACfP,IAAI,CAAEvC,QAAQ,CACdwC,KAAK,CAAE,OAAO,CACdC,OAAO,CAAE,aAAa,CACtBC,WAAW,CAAE,kBAAkB,CAC/BC,SAAS,CAAE,gBAAgB,CAC3BC,KAAK,CAAE,iBACT,CAAC,CACDG,YAAY,CAAE,CACZR,IAAI,CAAEtC,GAAG,CACTuC,KAAK,CAAE,QAAQ,CACfC,OAAO,CAAE,cAAc,CACvBC,WAAW,CAAE,mBAAmB,CAChCC,SAAS,CAAE,iBAAiB,CAC5BC,KAAK,CAAE,iBACT,CAAC,CACDI,eAAe,CAAE,CACfT,IAAI,CAAErC,UAAU,CAChBsC,KAAK,CAAE,KAAK,CACZC,OAAO,CAAE,WAAW,CACpBC,WAAW,CAAE,gBAAgB,CAC7BC,SAAS,CAAE,cAAc,CACzBC,KAAK,CAAE,iBACT,CAAC,CACDK,aAAa,CAAE,CACbV,IAAI,CAAE5C,KAAK,CACX6C,KAAK,CAAE,MAAM,CACbC,OAAO,CAAE,YAAY,CACrBC,WAAW,CAAE,iBAAiB,CAC9BC,SAAS,CAAE,eAAe,CAC1BC,KAAK,CAAE,eACT,CACF,CAAC,CAED;AACArD,SAAS,CAAC,IAAM,CACd,GAAIsB,MAAM,CAAE,CACVqC,yBAAyB,CAAC,CAAC,CAC3BC,iBAAiB,CAAC,CAAC,CACrB,CAEA,MAAO,IAAM,CACX,GAAId,KAAK,CAACe,OAAO,CAAE,CACjBf,KAAK,CAACe,OAAO,CAACC,KAAK,CAAC,CAAC,CACvB,CACF,CAAC,CACH,CAAC,CAAE,CAACxC,MAAM,CAAEG,OAAO,CAAC,CAAC,CAErB;AACAzB,SAAS,CAAC,IAAM,CACd+D,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACpC,MAAM,CAAEI,OAAO,CAAC,CAAC,CAErB,KAAM,CAAA4B,yBAAyB,CAAGA,CAAA,GAAM,CACtC,GAAI,CACFK,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC,CAEpD;AACAlD,gBAAgB,CAACmD,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,IAAM,CACpCH,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CACjD1B,cAAc,CAAC,IAAI,CAAC,CAEpB;AACAxB,gBAAgB,CAACqD,qBAAqB,CAAC,CAAC,CAExC;AACArD,gBAAgB,CAACsD,EAAE,CAAC,kBAAkB,CAAGC,IAAI,EAAK,CAChDN,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEK,IAAI,CAAC,CAClD1C,SAAS,CAAC2C,UAAU,EAAI,CAACD,IAAI,CAAE,GAAGC,UAAU,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AAC9D,CAAC,CAAC,CAEF;AACAzD,gBAAgB,CAACsD,EAAE,CAAC,WAAW,CAAG/B,WAAW,EAAK,CAChDC,cAAc,CAACD,WAAW,CAAC,CAC7B,CAAC,CAAC,CAEF;AACAvB,gBAAgB,CAACsD,EAAE,CAAC,WAAW,CAAG/B,WAAW,EAAK,CAChDC,cAAc,CAACD,WAAW,CAAC,CAC7B,CAAC,CAAC,CAEJ,CAAC,CAAC,CAACmC,KAAK,CAACC,KAAK,EAAI,CAChBV,OAAO,CAACU,KAAK,CAAC,2CAA2C,CAAEA,KAAK,CAAC,CACjEnC,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAAC,CACJ,CAAE,MAAOmC,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,2CAA2C,CAAEA,KAAK,CAAC,CACjEnC,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAqB,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF;AACA,KAAM,CAAAe,UAAU,CAAGC,kBAAkB,CAAC,EAAE,CAAC,CACzChD,SAAS,CAAC+C,UAAU,CAAC,CACvB,CAAE,MAAOD,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACxD,CACF,CAAC,CAED,KAAM,CAAAX,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAI,CAAAc,QAAQ,CAAG,CAAC,GAAGlD,MAAM,CAAC,CAE1B;AACA,GAAII,OAAO,CAACE,UAAU,GAAK,KAAK,CAAE,CAChC4C,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,KAAK,EAAIA,KAAK,CAACC,IAAI,GAAKjD,OAAO,CAACE,UAAU,CAAC,CACxE,CAEA;AACA,GAAIF,OAAO,CAACG,QAAQ,GAAK,KAAK,CAAE,CAC9B2C,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,KAAK,EAAIA,KAAK,CAAC7C,QAAQ,GAAKH,OAAO,CAACG,QAAQ,CAAC,CAC1E,CAEA;AACA,KAAM,CAAA+C,GAAG,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACtB,KAAM,CAAAC,WAAW,CAAG,CAClB,IAAI,CAAE,EAAE,CAAG,EAAE,CAAG,IAAI,CACpB,KAAK,CAAE,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,IAAI,CAC1B,IAAI,CAAE,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,IAAI,CAC7B,KAAK,CAAE,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,IAC7B,CAAC,CAED,GAAIpD,OAAO,CAACI,SAAS,GAAK,KAAK,CAAE,CAC/B,KAAM,CAAAiD,MAAM,CAAG,GAAI,CAAAF,IAAI,CAACD,GAAG,CAACI,OAAO,CAAC,CAAC,CAAGF,WAAW,CAACpD,OAAO,CAACI,SAAS,CAAC,CAAC,CACvE0C,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,KAAK,EAAI,GAAI,CAAAG,IAAI,CAACH,KAAK,CAACO,SAAS,CAAC,CAAGF,MAAM,CAAC,CACzE,CAEA;AACA,GAAIrD,OAAO,CAACK,MAAM,GAAK,KAAK,EAAI,CAAAV,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEsD,IAAI,IAAK,YAAY,CAAE,CAClEH,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,KAAK,EAAIA,KAAK,CAAC3C,MAAM,GAAKL,OAAO,CAACK,MAAM,CAAC,CACtE,CAEA;AACA,GAAIL,OAAO,CAACM,WAAW,CAACkD,IAAI,CAAC,CAAC,CAAE,CAC9B,KAAM,CAAAC,KAAK,CAAGzD,OAAO,CAACM,WAAW,CAACoD,WAAW,CAAC,CAAC,CAC/CZ,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,KAAK,OAAAW,aAAA,CAAAC,WAAA,OAC9B,CAAAZ,KAAK,CAACa,KAAK,CAACH,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,KAAK,CAAC,EACzCT,KAAK,CAACe,WAAW,CAACL,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,KAAK,CAAC,IAAAE,aAAA,CAC/CX,KAAK,CAAC3C,MAAM,UAAAsD,aAAA,iBAAZA,aAAA,CAAcD,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,KAAK,CAAC,KAAAG,WAAA,CAC3CZ,KAAK,CAACgB,IAAI,UAAAJ,WAAA,iBAAVA,WAAA,CAAYF,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,KAAK,CAAC,GAC3C,CAAC,CACH,CAEA1D,iBAAiB,CAAC+C,QAAQ,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAmB,oBAAoB,CAAIC,OAAO,EAAK,CACxC,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAxD,GAAG,CAACF,cAAc,CAAC,CAC3C,GAAI0D,WAAW,CAACC,GAAG,CAACF,OAAO,CAAC,CAAE,CAC5BC,WAAW,CAACE,MAAM,CAACH,OAAO,CAAC,CAC7B,CAAC,IAAM,CACLC,WAAW,CAACG,GAAG,CAACJ,OAAO,CAAC,CAC1B,CACAxD,iBAAiB,CAACyD,WAAW,CAAC,CAChC,CAAC,CAED,KAAM,CAAAI,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,OAAO,CAAG1E,cAAc,CAAC2E,GAAG,CAACzB,KAAK,GAAK,CAC3CO,SAAS,CAAEP,KAAK,CAACO,SAAS,CAC1BN,IAAI,CAAED,KAAK,CAACC,IAAI,CAChB9C,QAAQ,CAAE6C,KAAK,CAAC7C,QAAQ,CACxB0D,KAAK,CAAEb,KAAK,CAACa,KAAK,CAClBE,WAAW,CAAEf,KAAK,CAACe,WAAW,CAC9B1D,MAAM,CAAE2C,KAAK,CAAC3C,MAAM,CACpB2D,IAAI,CAAEhB,KAAK,CAACgB,IAAI,CAChBU,KAAK,CAAE1B,KAAK,CAAC0B,KACf,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAC,GAAG,CAAG,CACVC,MAAM,CAACC,IAAI,CAACL,OAAO,CAAC,CAAC,CAAC,CAAC,CAACM,IAAI,CAAC,GAAG,CAAC,CACjC,GAAGN,OAAO,CAACC,GAAG,CAACM,GAAG,EAAIH,MAAM,CAACI,MAAM,CAACD,GAAG,CAAC,CAACD,IAAI,CAAC,GAAG,CAAC,CAAC,CACpD,CAACA,IAAI,CAAC,IAAI,CAAC,CAEZ,KAAM,CAAAG,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC,CAACP,GAAG,CAAC,CAAE,CAAE1B,IAAI,CAAE,UAAW,CAAC,CAAC,CAClD,KAAM,CAAAkC,GAAG,CAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,CACrC,KAAM,CAAAK,CAAC,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACrCF,CAAC,CAACG,IAAI,CAAGN,GAAG,CACZG,CAAC,CAACI,QAAQ,CAAG,qBAAqB,GAAI,CAAAvC,IAAI,CAAC,CAAC,CAACwC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAC9EN,CAAC,CAACO,KAAK,CAAC,CAAC,CACX,CAAC,CAED,GAAI,CAACtG,MAAM,CAAE,MAAO,KAAI,CAExB,mBACEH,KAAA,QAAK0G,SAAS,CAAE;AACpB;AACA,QAAQrG,QAAQ,GAAK,OAAO,CAAG,SAAS,CAAG,QAAQ;AACnD,QAAQF,MAAM,CAAG,MAAM,CAAG,KAAK;AAC/B,KAAM,CAAAwG,QAAA,eAEA3G,KAAA,QAAK0G,SAAS,CAAC,0HAA0H,CAAAC,QAAA,eACvI3G,KAAA,QAAK0G,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC7G,IAAA,CAACf,QAAQ,EAAC6H,IAAI,CAAE,EAAG,CAAE,CAAC,cACtB5G,KAAA,QAAA2G,QAAA,eACE7G,IAAA,OAAI4G,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAClD7G,IAAA,MAAG4G,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CACnCxF,WAAW,CACV,GAAGT,cAAc,CAACmG,MAAM,qBAAqB,CAC7C,GAAGnG,cAAc,CAACmG,MAAM,qBAAqB,CAE9C,CAAC,EACD,CAAC,EACH,CAAC,cAEN7G,KAAA,QAAK0G,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC7G,IAAA,WACEgH,OAAO,CAAEA,CAAA,GAAMrF,oBAAoB,CAAC,CAACD,iBAAiB,CAAE,CACxDkF,SAAS,CAAC,sDAAsD,CAAAC,QAAA,cAEhE7G,IAAA,CAACV,MAAM,EAACwH,IAAI,CAAE,EAAG,CAAE,CAAC,CACd,CAAC,cACT9G,IAAA,WACEgH,OAAO,CAAE3B,YAAa,CACtBuB,SAAS,CAAC,sDAAsD,CAAAC,QAAA,cAEhE7G,IAAA,CAACH,QAAQ,EAACiH,IAAI,CAAE,EAAG,CAAE,CAAC,CAChB,CAAC,cACT9G,IAAA,WACEgH,OAAO,CAAE1G,OAAQ,CACjBsG,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CACjE,QAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CAGLnF,iBAAiB,eAChB1B,IAAA,QAAK4G,SAAS,CAAC,yCAAyC,CAAAC,QAAA,cACtD3G,KAAA,QAAK0G,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExB3G,KAAA,QAAK0G,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB7G,IAAA,CAACT,MAAM,EAACqH,SAAS,CAAC,kEAAkE,CAACE,IAAI,CAAE,EAAG,CAAE,CAAC,cACjG9G,IAAA,UACE+D,IAAI,CAAC,MAAM,CACXkD,WAAW,CAAC,kBAAkB,CAC9BC,KAAK,CAAEpG,OAAO,CAACM,WAAY,CAC3B+F,QAAQ,CAAGC,CAAC,EAAKrG,UAAU,CAAC,CAAC,GAAGD,OAAO,CAAEM,WAAW,CAAEgG,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE,CACvEN,SAAS,CAAC,kEAAkE,CAC7E,CAAC,EACC,CAAC,cAGN1G,KAAA,QAAA2G,QAAA,eACE7G,IAAA,UAAO4G,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,YAAU,CAAO,CAAC,cAClF3G,KAAA,WACEgH,KAAK,CAAEpG,OAAO,CAACE,UAAW,CAC1BmG,QAAQ,CAAGC,CAAC,EAAKrG,UAAU,CAAC,CAAC,GAAGD,OAAO,CAAEE,UAAU,CAAEoG,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE,CACtEN,SAAS,CAAC,4DAA4D,CAAAC,QAAA,eAEtE7G,IAAA,WAAQkH,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAC,WAAS,CAAQ,CAAC,CACrCnB,MAAM,CAAC4B,OAAO,CAACtG,UAAU,CAAC,CAACuE,GAAG,CAACgC,KAAA,MAAC,CAACC,GAAG,CAAEzD,IAAI,CAAC,CAAAwD,KAAA,oBAC1CvH,IAAA,WAAkBkH,KAAK,CAAEM,GAAI,CAAAX,QAAA,CAAE9C,IAAI,CAAC3B,KAAK,EAA5BoF,GAAqC,CAAC,EACpD,CAAC,EACI,CAAC,EACN,CAAC,cAENtH,KAAA,QAAK0G,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAErC3G,KAAA,QAAA2G,QAAA,eACE7G,IAAA,UAAO4G,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cAChF3G,KAAA,WACEgH,KAAK,CAAEpG,OAAO,CAACG,QAAS,CACxBkG,QAAQ,CAAGC,CAAC,EAAKrG,UAAU,CAAC,CAAC,GAAGD,OAAO,CAAEG,QAAQ,CAAEmG,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE,CACpEN,SAAS,CAAC,4DAA4D,CAAAC,QAAA,eAEtE7G,IAAA,WAAQkH,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChC7G,IAAA,WAAQkH,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChC7G,IAAA,WAAQkH,KAAK,CAAC,QAAQ,CAAAL,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtC7G,IAAA,WAAQkH,KAAK,CAAC,MAAM,CAAAL,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClC7G,IAAA,WAAQkH,KAAK,CAAC,UAAU,CAAAL,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACpC,CAAC,EACN,CAAC,cAGN3G,KAAA,QAAA2G,QAAA,eACE7G,IAAA,UAAO4G,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,YAAU,CAAO,CAAC,cAClF3G,KAAA,WACEgH,KAAK,CAAEpG,OAAO,CAACI,SAAU,CACzBiG,QAAQ,CAAGC,CAAC,EAAKrG,UAAU,CAAC,CAAC,GAAGD,OAAO,CAAEI,SAAS,CAAEkG,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE,CACrEN,SAAS,CAAC,4DAA4D,CAAAC,QAAA,eAEtE7G,IAAA,WAAQkH,KAAK,CAAC,IAAI,CAAAL,QAAA,CAAC,WAAS,CAAQ,CAAC,cACrC7G,IAAA,WAAQkH,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAC,eAAa,CAAQ,CAAC,cAC1C7G,IAAA,WAAQkH,KAAK,CAAC,IAAI,CAAAL,QAAA,CAAC,aAAW,CAAQ,CAAC,cACvC7G,IAAA,WAAQkH,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAC,cAAY,CAAQ,CAAC,cACzC7G,IAAA,WAAQkH,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAC,UAAQ,CAAQ,CAAC,EAC/B,CAAC,EACN,CAAC,EACH,CAAC,CAGL,CAAApG,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEsD,IAAI,IAAK,YAAY,eACjC7D,KAAA,QAAA2G,QAAA,eACE7G,IAAA,UAAO4G,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,QAAM,CAAO,CAAC,cAC9E3G,KAAA,WACEgH,KAAK,CAAEpG,OAAO,CAACK,MAAO,CACtBgG,QAAQ,CAAGC,CAAC,EAAKrG,UAAU,CAAC,CAAC,GAAGD,OAAO,CAAEK,MAAM,CAAEiG,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE,CAClEN,SAAS,CAAC,4DAA4D,CAAAC,QAAA,eAEtE7G,IAAA,WAAQkH,KAAK,CAAC,KAAK,CAAAL,QAAA,CAAC,cAAY,CAAQ,CAAC,cACzC7G,IAAA,WAAQkH,KAAK,CAAC,eAAe,CAAAL,QAAA,CAAC,eAAa,CAAQ,CAAC,cACpD7G,IAAA,WAAQkH,KAAK,CAAC,eAAe,CAAAL,QAAA,CAAC,eAAa,CAAQ,CAAC,cACpD7G,IAAA,WAAQkH,KAAK,CAAC,cAAc,CAAAL,QAAA,CAAC,cAAY,CAAQ,CAAC,cAClD7G,IAAA,WAAQkH,KAAK,CAAC,kBAAkB,CAAAL,QAAA,CAAC,kBAAgB,CAAQ,CAAC,EACpD,CAAC,EACN,CACN,EACE,CAAC,CACH,CACN,cAGD7G,IAAA,QACEyH,GAAG,CAAE7F,SAAU,CACfgF,SAAS,CAAC,iDAAiD,CAAAC,QAAA,CAE1DjG,cAAc,CAACmG,MAAM,GAAK,CAAC,cAC1B7G,KAAA,QAAK0G,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC7G,IAAA,CAACf,QAAQ,EAAC2H,SAAS,CAAC,4BAA4B,CAACE,IAAI,CAAE,EAAG,CAAE,CAAC,cAC7D9G,IAAA,OAAI4G,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC3E7G,IAAA,MAAG4G,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CACjC/F,OAAO,CAACM,WAAW,EAAIN,OAAO,CAACE,UAAU,GAAK,KAAK,EAAIF,OAAO,CAACI,SAAS,GAAK,KAAK,CAC/E,gDAAgD,CAChD,wCAAwC,CAE3C,CAAC,EACD,CAAC,CAENN,cAAc,CAAC2E,GAAG,CAACzB,KAAK,eACtB9D,IAAA,CAAC0H,SAAS,EAER5D,KAAK,CAAEA,KAAM,CACb6D,SAAS,CAAE3G,UAAU,CAAC8C,KAAK,CAACC,IAAI,CAAE,CAClC6D,UAAU,CAAErG,cAAc,CAAC2D,GAAG,CAACpB,KAAK,CAAC+D,EAAE,CAAE,CACzCC,iBAAiB,CAAEA,CAAA,GAAM/C,oBAAoB,CAACjB,KAAK,CAAC+D,EAAE,CAAE,CACxDpH,WAAW,CAAEA,WAAY,EALpBqD,KAAK,CAAC+D,EAMZ,CACF,CACF,CACE,CAAC,cAGN7H,IAAA,QAAK4G,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAC1D3G,KAAA,QAAK0G,SAAS,CAAC,yDAAyD,CAAAC,QAAA,eACtE3G,KAAA,QAAK0G,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC7G,IAAA,QAAK4G,SAAS,CAAE,wBAAwBvF,WAAW,CAAG,cAAc,CAAG,aAAa,EAAG,CAAE,CAAC,cAC1FrB,IAAA,SAAA6G,QAAA,CAAOxF,WAAW,CAAG,oBAAoB,CAAG,gBAAgB,CAAO,CAAC,EACjE,CAAC,cACNnB,KAAA,SAAA2G,QAAA,EAAOjG,cAAc,CAACmG,MAAM,CAAC,eAAa,EAAM,CAAC,EAC9C,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAW,SAAS,CAAGK,KAAA,EAAsE,IAArE,CAAEjE,KAAK,CAAE6D,SAAS,CAAEC,UAAU,CAAEE,iBAAiB,CAAErH,WAAY,CAAC,CAAAsH,KAAA,CACjF,KAAM,CAAAC,IAAI,CAAGL,SAAS,CAAC5F,IAAI,CAC3B,KAAM,CAAAkG,OAAO,CAAGC,UAAU,CAACpE,KAAK,CAACO,SAAS,CAAC,CAE3C,KAAM,CAAA8D,gBAAgB,CAAIlH,QAAQ,EAAK,CACrC,OAAQA,QAAQ,EACd,IAAK,UAAU,CAAE,MAAO,yBAAyB,CACjD,IAAK,MAAM,CAAE,MAAO,+BAA+B,CACnD,IAAK,QAAQ,CAAE,MAAO,+BAA+B,CACrD,IAAK,KAAK,CAAE,MAAO,6BAA6B,CAChD,QAAS,MAAO,2BAA2B,CAC7C,CACF,CAAC,CAED;AACA,KAAM,CAAAmH,iBAAiB,CAAIpG,KAAK,EAAK,CACnC,OAAQA,KAAK,EACX,IAAK,MAAM,CAAE,MAAO,eAAe,CACnC,IAAK,QAAQ,CAAE,MAAO,iBAAiB,CACvC,IAAK,OAAO,CAAE,MAAO,gBAAgB,CACrC,IAAK,QAAQ,CAAE,MAAO,iBAAiB,CACvC,IAAK,KAAK,CAAE,MAAO,cAAc,CACjC,IAAK,MAAM,CAAE,MAAO,eAAe,CACnC,QAAS,MAAO,eAAe,CACjC,CACF,CAAC,CAED,mBACE9B,KAAA,QAAK0G,SAAS,CAAE;AACpB;AACA,QAAQe,SAAS,CAACzF,WAAW;AAC7B,KAAM,CAAA2E,QAAA,eAEA7G,IAAA,QAAK4G,SAAS,CAAC,KAAK,CAAAC,QAAA,cAClB3G,KAAA,QAAK0G,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/C3G,KAAA,QAAK0G,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC5C7G,IAAA,QAAK4G,SAAS,CAAE;AAC5B;AACA,gBAAgBe,SAAS,CAAC1F,OAAO;AACjC,aAAc,CAAA4E,QAAA,cACA7G,IAAA,CAACgI,IAAI,EAAClB,IAAI,CAAE,EAAG,CAACF,SAAS,CAAEwB,iBAAiB,CAACT,SAAS,CAAC3F,KAAK,CAAE,CAAE,CAAC,CAC9D,CAAC,cAEN9B,KAAA,QAAK0G,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B3G,KAAA,QAAK0G,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C7G,IAAA,OAAI4G,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CACvD/C,KAAK,CAACa,KAAK,CACV,CAAC,cACL3E,IAAA,SAAM4G,SAAS,CAAE;AACjC;AACA,oBAAoBuB,gBAAgB,CAACrE,KAAK,CAAC7C,QAAQ,CAAC;AACpD,iBAAkB,CAAA4F,QAAA,CACC/C,KAAK,CAAC7C,QAAQ,CACX,CAAC,EACJ,CAAC,cAENjB,IAAA,MAAG4G,SAAS,CAAC,4BAA4B,CAACyB,KAAK,CAAE,CAC/CC,QAAQ,CAAE,QAAQ,CAClBC,OAAO,CAAE,aAAa,CACtBC,eAAe,CAAE,CAAC,CAClBC,eAAe,CAAE,UACnB,CAAE,CAAA5B,QAAA,CACC/C,KAAK,CAACe,WAAW,CACjB,CAAC,cAEJ3E,KAAA,QAAK0G,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC5D3G,KAAA,SAAM0G,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACvC7G,IAAA,CAACX,KAAK,EAACyH,IAAI,CAAE,EAAG,CAAE,CAAC,CAClBmB,OAAO,EACJ,CAAC,CACNnE,KAAK,CAAC3C,MAAM,eACXjB,KAAA,SAAM0G,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACvC7G,IAAA,CAACb,KAAK,EAAC2H,IAAI,CAAE,EAAG,CAAE,CAAC,CAClBhD,KAAK,CAAC3C,MAAM,EACT,CACP,CACA2C,KAAK,CAACgB,IAAI,eACT9E,IAAA,SAAA6G,QAAA,CAAO/C,KAAK,CAACgB,IAAI,CAAO,CACzB,CACAhB,KAAK,CAAC0B,KAAK,eACVtF,KAAA,SAAM0G,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACvC7G,IAAA,CAACP,GAAG,EAACqH,IAAI,CAAE,EAAG,CAAE,CAAC,CAChBhD,KAAK,CAAC0B,KAAK,EACR,CACP,EACE,CAAC,EACH,CAAC,EACH,CAAC,CAEL1B,KAAK,CAAC4E,OAAO,eACZ1I,IAAA,WACEgH,OAAO,CAAEc,iBAAkB,CAC3BlB,SAAS,CAAC,yDAAyD,CAAAC,QAAA,CAElEe,UAAU,cAAG5H,IAAA,CAACJ,SAAS,EAACkH,IAAI,CAAE,EAAG,CAAE,CAAC,cAAG9G,IAAA,CAACL,WAAW,EAACmH,IAAI,CAAE,EAAG,CAAE,CAAC,CAC3D,CACT,EACE,CAAC,CACH,CAAC,CAGLc,UAAU,EAAI9D,KAAK,CAAC4E,OAAO,eAC1B1I,IAAA,QAAK4G,SAAS,CAAC,yCAAyC,CAAAC,QAAA,cACtD3G,KAAA,QAAK0G,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvB/C,KAAK,CAAC4E,OAAO,CAACnD,GAAG,CAAC,CAACoD,MAAM,CAAEC,KAAK,gBAC/B1I,KAAA,QAAiB0G,SAAS,CAAC,SAAS,CAAAC,QAAA,eAClC7G,IAAA,QAAK4G,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAE8B,MAAM,CAACvG,KAAK,CAAM,CAAC,cACpEpC,IAAA,QAAK4G,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAE8B,MAAM,CAACzB,KAAK,CAAM,CAAC,GAF3C0B,KAGL,CACN,CAAC,CAED9E,KAAK,CAAC+E,OAAO,EAAI/E,KAAK,CAAC+E,OAAO,CAAC9B,MAAM,CAAG,CAAC,eACxC7G,KAAA,QAAK0G,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC5C7G,IAAA,QAAK4G,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,eAAa,CAAK,CAAC,cAC3E7G,IAAA,QAAK4G,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAClC/C,KAAK,CAAC+E,OAAO,CAACtD,GAAG,CAAC,CAACuD,MAAM,CAAEF,KAAK,gBAC/B5I,IAAA,WAEEgH,OAAO,CAAEA,CAAA,GAAM+B,kBAAkB,CAACD,MAAM,CAAE,CAC1ClC,SAAS,CAAC,qGAAqG,CAAAC,QAAA,CAE9GiC,MAAM,CAAC1G,KAAK,EAJRwG,KAKC,CACT,CAAC,CACC,CAAC,EACH,CACN,EACE,CAAC,CACH,CACN,EACE,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAV,UAAU,CAAI7D,SAAS,EAAK,CAChC,KAAM,CAAAL,GAAG,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACtB,KAAM,CAAA+E,SAAS,CAAG,GAAI,CAAA/E,IAAI,CAACI,SAAS,CAAC,CACrC,KAAM,CAAA4E,MAAM,CAAGjF,GAAG,CAAGgF,SAAS,CAC9B,KAAM,CAAAE,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACH,MAAM,CAAG,KAAK,CAAC,CAC3C,KAAM,CAAAI,SAAS,CAAGF,IAAI,CAACC,KAAK,CAACF,QAAQ,CAAG,EAAE,CAAC,CAC3C,KAAM,CAAAI,QAAQ,CAAGH,IAAI,CAACC,KAAK,CAACC,SAAS,CAAG,EAAE,CAAC,CAE3C,GAAIH,QAAQ,CAAG,CAAC,CAAE,MAAO,UAAU,CACnC,GAAIA,QAAQ,CAAG,EAAE,CAAE,MAAO,GAAGA,QAAQ,OAAO,CAC5C,GAAIG,SAAS,CAAG,EAAE,CAAE,MAAO,GAAGA,SAAS,OAAO,CAC9C,MAAO,GAAGC,QAAQ,OAAO,CAC3B,CAAC,CAED,KAAM,CAAAP,kBAAkB,CAAID,MAAM,EAAK,CACrC;AACAS,MAAM,CAACC,aAAa,CAAC,GAAI,CAAAC,WAAW,CAACX,MAAM,CAAChF,KAAK,CAAE,CAAE6E,MAAM,CAAEG,MAAM,CAACzF,IAAK,CAAC,CAAC,CAAC,CAC9E,CAAC,CAED;AACA,KAAM,CAAAM,kBAAkB,CAAI+F,KAAK,EAAK,CACpC,KAAM,CAAAhG,UAAU,CAAG,EAAE,CACrB,KAAM,CAAAiG,cAAc,CAAG,CACrB,CACE5F,IAAI,CAAE,iBAAiB,CACvB9C,QAAQ,CAAE,QAAQ,CAClB0D,KAAK,CAAE,mBAAmB,CAC1BE,WAAW,CAAE,6DAA6D,CAC1E1D,MAAM,CAAE,eAAe,CACvB2D,IAAI,CAAE,eAAe,CACrBU,KAAK,CAAE,kBACT,CAAC,CACD,CACEzB,IAAI,CAAE,iBAAiB,CACvB9C,QAAQ,CAAE,KAAK,CACf0D,KAAK,CAAE,oBAAoB,CAC3BE,WAAW,CAAE,uDAAuD,CACpE1D,MAAM,CAAE,eAAe,CACvB2D,IAAI,CAAE,WAAW,CACjBU,KAAK,CAAE,IACT,CAAC,CACD,CACEzB,IAAI,CAAE,kBAAkB,CACxB9C,QAAQ,CAAE,MAAM,CAChB0D,KAAK,CAAE,+BAA+B,CACtCE,WAAW,CAAE,0DAA0D,CACvE1D,MAAM,CAAE,cAAc,CACtB2D,IAAI,CAAE,aAAa,CACnBU,KAAK,CAAE,oBACT,CAAC,CACD,CACEzB,IAAI,CAAE,iBAAiB,CACvB9C,QAAQ,CAAE,QAAQ,CAClB0D,KAAK,CAAE,0BAA0B,CACjCE,WAAW,CAAE,oEAAoE,CACjF1D,MAAM,CAAE,kBAAkB,CAC1B2D,IAAI,CAAE,WAAW,CACjBU,KAAK,CAAE,eACT,CAAC,CACD,CACEzB,IAAI,CAAE,cAAc,CACpB9C,QAAQ,CAAE,KAAK,CACf0D,KAAK,CAAE,yBAAyB,CAChCE,WAAW,CAAE,+DAA+D,CAC5E1D,MAAM,CAAE,eAAe,CACvB2D,IAAI,CAAE,IAAI,CACVU,KAAK,CAAE,oBACT,CAAC,CACF,CAED,IAAK,GAAI,CAAAoE,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGF,KAAK,CAAEE,CAAC,EAAE,CAAE,CAC9B,KAAM,CAAAC,QAAQ,CAAGF,cAAc,CAACR,IAAI,CAACC,KAAK,CAACD,IAAI,CAACW,MAAM,CAAC,CAAC,CAAGH,cAAc,CAAC5C,MAAM,CAAC,CAAC,CAClF,KAAM,CAAAjD,KAAK,CAAG,CACZ+D,EAAE,CAAE5D,IAAI,CAACD,GAAG,CAAC,CAAC,CAAG4F,CAAC,CAClB,GAAGC,QAAQ,CACXxF,SAAS,CAAE,GAAI,CAAAJ,IAAI,CAACA,IAAI,CAACD,GAAG,CAAC,CAAC,CAAGmF,IAAI,CAACW,MAAM,CAAC,CAAC,CAAG,QAAQ,CAAG,CAAC,CAAC,CAACrD,WAAW,CAAC,CAAC,CAAE;AAC9EiC,OAAO,CAAE,CACP,CAAEtG,KAAK,CAAE,UAAU,CAAE8E,KAAK,CAAE,OAAO6C,MAAM,CAAC9F,IAAI,CAACD,GAAG,CAAC,CAAC,CAAG4F,CAAC,CAAC,CAACrG,KAAK,CAAC,CAAC,CAAC,CAAC,EAAG,CAAC,CACvE,CAAEnB,KAAK,CAAE,QAAQ,CAAE8E,KAAK,CAAE,sBAAuB,CAAC,CAClD,CAAE9E,KAAK,CAAE,QAAQ,CAAE8E,KAAK,CAAE2C,QAAQ,CAAC5I,QAAQ,GAAK,MAAM,CAAG,qCAAqC,CAAG,0BAA2B,CAAC,CAC9H,CACD4H,OAAO,CAAEgB,QAAQ,CAAC9F,IAAI,GAAK,kBAAkB,CAAG,CAC9C,CAAE3B,KAAK,CAAE,gBAAgB,CAAE0B,KAAK,CAAE,sBAAsB,CAAET,IAAI,CAAE,CAAE2B,OAAO,CAAEf,IAAI,CAACD,GAAG,CAAC,CAAC,CAAG4F,CAAE,CAAE,CAAC,CAC7F,CAAExH,KAAK,CAAE,gBAAgB,CAAE0B,KAAK,CAAE,mBAAmB,CAAET,IAAI,CAAE,CAAElC,MAAM,CAAE0I,QAAQ,CAAC1I,MAAO,CAAE,CAAC,CAC3F,CAAG,EACN,CAAC,CACDuC,UAAU,CAACsG,IAAI,CAAClG,KAAK,CAAC,CACxB,CAEA,MAAO,CAAAJ,UAAU,CAACuG,IAAI,CAAC,CAAC7D,CAAC,CAAE8D,CAAC,GAAK,GAAI,CAAAjG,IAAI,CAACiG,CAAC,CAAC7F,SAAS,CAAC,CAAG,GAAI,CAAAJ,IAAI,CAACmC,CAAC,CAAC/B,SAAS,CAAC,CAAC,CACjF,CAAC,CAED;AACA,MAAO,MAAM,CAAA8F,uBAAuB,CAAGA,CAAA,GAAM,CAC3C,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGvL,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACwL,aAAa,CAAEC,gBAAgB,CAAC,CAAGzL,QAAQ,CAAC,IAAI,CAAC,CAExDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAyL,gBAAgB,CAAI1G,KAAK,EAAK,CAClCyG,gBAAgB,CAACzG,KAAK,CAAC6E,MAAM,EAAI,IAAI,CAAC,CACtC0B,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAEDd,MAAM,CAACkB,gBAAgB,CAAC,sBAAsB,CAAED,gBAAgB,CAAC,CACjE,MAAO,IAAMjB,MAAM,CAACmB,mBAAmB,CAAC,sBAAsB,CAAEF,gBAAgB,CAAC,CACnF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,UAAU,CAAG,QAAAA,CAAA,CAAoB,IAAnB,CAAAnK,OAAO,CAAAoK,SAAA,CAAA7D,MAAA,IAAA6D,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,IAAI,CAChCL,gBAAgB,CAAC/J,OAAO,CAAC,CACzB6J,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED,MAAO,CACLD,YAAY,CACZC,eAAe,CACfC,aAAa,CACbK,UACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAxK,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}